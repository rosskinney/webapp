<% form_tag %>
  <% select_tag(:year_and_month_string, @years_and_months) %>
  <% submit_tag %>
<% end %>


class PostsController
  def index
    @years_and_months = Post.years_and_months
    Post.by_year_and_month( params[:year_and_month_string] )
  end
end

class Post < ActiveRecord::Base
  scope :by_year_and_month, lambda do |year_and_month_string|
    year_and_month = Date.parse( year_and_month_string )
    where(created_at = year_and_month)
    where("YEAR(created_at) = ? AND MONTH(created_at) = ?",
        year_and_month.year, year_and_month.month)
  end

  scope :years_and_months
    Post.select("DISTINCT YEAR(created_at), MONTH(created_at)")
  end
end
